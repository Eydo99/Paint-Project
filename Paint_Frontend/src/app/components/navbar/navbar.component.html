<nav class="navbar">
  <div class="nav-left">
    <span class="brand">Paint Studio</span>

    <ul class="menu">
      <li class="dropdown">
        <span (click)="toggleMenu('file')">File <i class="ri-arrow-down-s-line"></i></span>
        <div class="dropdown-content" *ngIf="openMenu === 'file'">
          <a (click)="openSaveDialog('json')">Save as JSON</a>
          <a (click)="openSaveDialog('xml')">Save as XML</a>
          <label for="fileUpload" class="upload-label">Load File</label>
          <input type="file" id="fileUpload" (change)="onFileSelected($event)" accept=".json,.xml" style="display: none;">
        </div>
      </li>

      <li class="dropdown">
        <span (click)="toggleMenu('colors')">Colors <i class="ri-arrow-down-s-line"></i></span>
        <div class="dropdown-content colors-panel" *ngIf="openMenu === 'colors'">
          <!-- ✨ NEW: Mode selector -->
          <div class="color-mode-selector">
            <button
              [class.active]="colorMode === 'fill'"
              (click)="setColorMode('fill')">
              Fill
            </button>
            <button
              [class.active]="colorMode === 'stroke'"
              (click)="setColorMode('stroke')">
              Stroke
            </button>
          </div>

          <!-- Color grid -->
          <div class="colors-grid">
            <div *ngFor="let color of colors"
                 [style.background]="color"
                 class="color-box"
                 [class.selected-fill]="colorMode === 'fill' && color === currentFillColor"
                 [class.selected-stroke]="colorMode === 'stroke' && color === currentStrokeColor"
                 (click)="selectColor(color)">
            </div>
          </div>
        </div>
      </li>

      <li class="dropdown">
        <span (click)="toggleMenu('actions')">Actions <i class="ri-arrow-down-s-line"></i></span>
        <div class="dropdown-content" *ngIf="openMenu === 'actions'">
          <a (click)="performAction('copy')">Copy Shape</a>
          <a (click)="performAction('delete')">Delete Shape</a>
          <div class="divider"></div>
          <a (click)="performAction('clear')" class="danger">Clear All</a>
        </div>
      </li>
    </ul>
  </div>



  <div class="nav-right">
    <div class="undo-redo">
      <button class="icon-btn" (click)="performAction('undo')"><i class="ri-arrow-go-back-line"></i></button>
      <button class="icon-btn" (click)="performAction('redo')"><i class="ri-arrow-go-forward-line"></i></button>
    </div>

  </div>
</nav>

<!-- ✨ Save Dialog Modal - ADD THIS -->
<div *ngIf="showSaveDialog" class="modal-overlay" (click)="closeSaveDialog()">
  <div class="save-dialog" (click)="$event.stopPropagation()">
    <div class="dialog-header">
      <h3>Save as {{ saveFormat.toUpperCase() }}</h3>
      <button class="close-btn" (click)="closeSaveDialog()">×</button>
    </div>

    <div class="dialog-body">
      <div class="form-group">
        <label>File Name:</label>
        <input 
          type="text" 
          [(ngModel)]="saveFileName" 
          placeholder="Enter file name"
          class="form-input"
        />
      </div>

      <div class="form-group">
        <label>Save Path (optional):</label>
        <input 
          type="text" 
          [(ngModel)]="savePath" 
          placeholder="e.g., /documents/projects"
          class="form-input"
        />
      </div>
    </div>

    <div class="dialog-footer">
      <button class="btn-cancel" (click)="closeSaveDialog()">Cancel</button>
      <button class="btn-save" (click)="confirmSave()">Save</button>
    </div>
  </div>
</div>